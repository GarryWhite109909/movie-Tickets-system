### 1. 项目功能架构推断
根据数据库表结构 ( film , arrange , booking , seatinfo , sys_role 等)，该项目包含两个核心端： 用户端 (Web) 和 管理端 (Admin) 。
 A. 核心业务模块
1. 影片中心 ( film , filmclass , filmarea )
   - 功能 ：影片的增删改查、海报管理、分类（动作/喜剧）、区域（欧美/大陆）、演职员信息维护。
   - 推断 ：前端需要展示“正在热映”和“即将上映”，后台需要复杂的表单来录入影片详情。
2. 影院与影厅 ( filmroom , seatinfo )
   - 功能 ：影厅管理（IMAX厅/普通厅）、 座位布局设计 。
   - 关键点 ： seatinfo 表存储了 row 和 column ，说明系统需要一个可视化选座/排座功能（如 10行15列的矩阵）。
3. 排片系统 ( arrange )
   - 功能 ：将“影片”分配给“影厅”在特定“时间段”播放，并设定“价格”。
   - 关键点 ：这是售票的核心。后台需要排片日历，防止同一影厅时间冲突。
4. 订单与交易 ( booking )
   - 功能 ：用户选座下单、生成票码 ( ticketCode )、订单状态流转（待支付/已支付/已退款）。
   - 关键点 ： booking 表关联了 seatId ，意味着 一个订单对应一个座位 ，多人购票会生成多条记录或一个主订单关联多条明细。 B. 系统支撑模块
1. RBAC 权限系统 (新 sys_ 表)
   - 功能 ：用户管理、角色分配、菜单与按钮级权限控制。
2. 运营配置 ( indexcarousel , hotfilm )
   - 功能 ：首页轮播图配置、热门影片推荐管理。
### 2. 后续开发工作规划 (Roadmap)
为了有序推进项目，建议按照 “基础架构 -> 核心业务 -> 完整流程” 的顺序进行。
 **第一阶段：基础服务与权限迁移 (Backend Priority)**
目标：让系统跑在新的权限架构上，并打通基础数据的 CRUD。

1. 鉴权升级 ：修改 NestJS 的 AuthModule ，从新的 sys_role 和 sys_permission 表读取权限，替换原有的简易鉴权。
2. 基础数据 API ：
   - 完善 FilmModule ：实现影片的新增、编辑、删除（目前仅有查询）。
   - 新建 CinemaModule ：实现影厅 ( filmroom ) 的管理接口。
3. 管理端基础页 ：
   - 在 Admin 端开发“角色管理”和“用户管理”页面，对接新 API。 


   **第二阶段：排片与座位核心 (Core Logic)**
目标：解决最复杂的业务逻辑——如何把电影、场地和时间关联起来。
1. 座位生成器 ：
   - 后端 ：开发接口，支持“一键生成 10x15 座位图”并保存到 seatinfo 。
   - 前端 (Admin) ：开发座位设计器，允许管理员禁用损坏的座椅（维修中）。
2. 排片引擎 ：
   - 后端 ：开发 ArrangeModule 。 难点 ：插入排片时需检测时间冲突（该影厅该时段是否已有排片）。
   - 前端 (Admin) ：开发排片日历视图，直观展示各影厅播放计划。 

   
   **第三阶段：购票全流程 (User Flow)**
目标：打通C端用户的钱包。
1. 选座接口 ：
   - 开发“获取实时座位图”接口：返回某场排片的全部座位，并标记哪些已被 booking 表占用。
2. 下单事务 ：
   - 实现 OrderModule 。 关键 ：并发控制（防止两个人同时买同一个座），利用数据库事务或锁机制。
3. 前端选座页 ：
   - 在 Web 端实现电影选座交互（Canvas 或 Grid 布局），点击座位下单。 


   **第四阶段：统计与优化**
1. 数据看板 ：基于 finance 角色，开发销售额统计、热门影片排行。
2. 首页装修 ：对接 indexcarousel ，让首页动态化。


### 3. 待确认事项 (To-Do)
- 检查 booking 逻辑 ：一次购买多张票是存为多条记录
- 图片存储方案 ：posterimg 中的 URL 是存的本地路径
